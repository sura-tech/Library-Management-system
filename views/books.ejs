<%- include("partials/header") %>

<h2 class="mb-4">All Books</h2>

<table class="table table-striped table-bordered shadow">
  <tr class="table-dark">
    <th>Title</th>
    <th>Author</th>
    <th>Tags</th>
    <th>Available</th>
    <th>Total</th>
    <th>Borrow</th>
  </tr>

  <% books.forEach(book => { %>
  <tr>
    <td><%= book.title %></td>
    <td><%= book.author %></td>
    <td><%= book.tags.join(", ") %></td>
    <td><%= book.availableCopies %></td>
    <td><%= book.totalCopies %></td>
    <td>
      <% if (book.availableCopies > 0) { %>
        <form action="/borrow/<%= book._id %>" method="POST">
          <button class="btn btn-primary btn-sm">Borrow</button>
        </form>
      <% } else { %>
        <span class="badge bg-danger">Out of Stock</span>
      <% } %>
    </td>
  </tr>
  <% }) %>
</table>

<%- include("partials/footer") %>
